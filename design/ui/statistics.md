[â† Back to README](README.md)

# Statistics

<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (AppBar)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ <a href="./dashboard.md">â† Back</a>  Statistics                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  Filter Controls                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Year                                              â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ [2024 â–¼]                                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ 2024                                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ 2023                                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ 2022                                      â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ Month                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ [January â–¼]                                    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ January                                    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ February                                   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ March                                      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   ...                                          â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ Currency                                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ [USD â–¼]                                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ USD (used in transactions)                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ EUR (used in transactions)                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ GBP (used in transactions)                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚   (only currencies used in selected period)   â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ â„¹ï¸  Showing statistics for USD only              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  Summary Cards                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ Total Income â”‚ â”‚ Total Expenseâ”‚ â”‚ Net Balanceâ”‚ â”‚ â”‚
â”‚  â”‚ â”‚              â”‚ â”‚              â”‚ â”‚            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ $2,500.00    â”‚ â”‚ $1,800.00    â”‚ â”‚ $700.00    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ (green)      â”‚ â”‚ (red)        â”‚ â”‚ (blue)     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚              â”‚ â”‚              â”‚ â”‚            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ USD          â”‚ â”‚ USD          â”‚ â”‚ USD        â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  Charts                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  Expense Breakdown by Tag                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚         [Pie Chart]                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Food & Dining: 35% ($630.00)                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Transportation: 25% ($450.00)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Shopping: 20% ($360.00)                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Bills & Utilities: 15% ($270.00)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Other: 5% ($90.00)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  Income vs Expense                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $3,000 â”¤                                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $2,500 â”¤     â–ˆâ–ˆâ–ˆâ–ˆ                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $2,000 â”¤     â–ˆâ–ˆâ–ˆâ–ˆ                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $1,500 â”¤     â–ˆâ–ˆâ–ˆâ–ˆ                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $1,000 â”¤     â–ˆâ–ˆâ–ˆâ–ˆ                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    $500 â”¤     â–ˆâ–ˆâ–ˆâ–ˆ                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      $0 â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼ â”‚ â”‚
â”‚  â”‚  â”‚          Income  Expense                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Income:  $2,500.00 (green bar)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Expense: $1,800.00 (red bar)                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  Empty State (when no data)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚        ğŸ“Š                                          â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  No data available for selected period            â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  Try selecting a different month or currency      â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>

## API Endpoints

<a id="api-endpoints"></a>

<a id="api-statistics"></a>

### Statistics
- `GET /api/statistics?profile&from&to&currency` â€” See [API Response Documentation](./api/statistics.md)

**Note:** In Guest Mode, API calls are intercepted client-side and return mock data generated in the browser using Faker.js. No server requests are made in Guest Mode.

**Storage:** Backed by PostgreSQL (Neon). All endpoints operate on database tables with server-side authorization checks.

## Component Structure

The Statistics page consists of:

```
Statistics
â”œâ”€â”€ Header (AppBar with back button)
â”œâ”€â”€ FilterControls
â”‚   â”œâ”€â”€ YearSelector (dropdown)
â”‚   â”œâ”€â”€ MonthSelector (dropdown)
â”‚   â””â”€â”€ CurrencySelector (dropdown - shows only currencies used in transactions for selected period)
â”œâ”€â”€ StatsDisplay (when year and month selected)
â”‚   â”œâ”€â”€ ExpensePieChart (breakdown by tags, only transactions in selected currency)
â”‚   â”œâ”€â”€ IncomeVsExpenseBar (only transactions in selected currency)
â”‚   â””â”€â”€ SummaryCards
â”‚       â”œâ”€â”€ TotalIncomeCard (in selected currency)
â”‚       â”œâ”€â”€ TotalExpenseCard (in selected currency)
â”‚       â””â”€â”€ NetBalanceCard (in selected currency)
â””â”€â”€ EmptyState (when no data for selected period/currency)
```

**Note:** Statistics show only transactions in the selected currency, filtering by `type` for expenses and incomes.

## View Statistics Flow

1. Dashboard â†’ Statistics Button
2. Select Year â†’ Select Month
3. Load transactions from DB
4. Filter expenses (type === 'expense')
5. Filter incomes (type === 'income')
6. Determine currencies used in transactions
7. Populate Currency Filter dropdown
8. User selects currency to view (default: user's default currency)
9. Filter transactions by selected currency
10. Aggregate data by tags for filtered transactions
11. Render Pie Chart & Summary showing only selected currency
12. Display Results

## Features

- **Year and Month Selection**: Dropdown selectors for filtering by time period
- **Currency Filter**: Shows only currencies used in transactions for selected period
- **Expense Breakdown**: Pie chart showing expense breakdown by tags (only selected currency)
- **Income vs Expense**: Bar chart comparing income and expense totals (only selected currency)
- **Summary Cards**: Total income, total expense, and net balance in selected currency
- **Empty State**: Clear message when no data available for selected period/currency
- **Currency-Specific**: All statistics filtered by selected currency (no conversion)

## User Flow

1. User navigates to Statistics page
2. User selects year and month
3. System loads transactions for selected period
4. System determines available currencies
5. Currency dropdown populates with currencies used in transactions
6. User selects currency (defaults to user's default currency)
7. System filters transactions by selected currency
8. Charts and summaries display for selected currency only
9. User can change currency to view different currency statistics

## UI/UX Guidelines

- Clearly indicate which currency is selected (e.g., "Showing statistics for USD only")
- Use appropriate currency symbols ($ Â£ â‚¬ Â¥) when displaying amounts
- Format numbers according to currency locale
- Color-coded charts: Red for expenses, green for incomes
- Responsive charts that adapt to mobile and desktop
- Smooth animations for chart rendering (200-400ms)
- Empty state provides helpful guidance to try different filters
